<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>UnityUtilities: UnityHelper</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">UnityUtilities
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00234.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">UnityHelper </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The UnityHelper contains a plethora of useful extensions and helpers for Transform, GameObject, Vector2/3/4, Rect and more.</p>
<h2>Examples</h2>
<h3>Transform/Vector/Color</h3>
<div class="fragment"><div class="line">{C#}</div><div class="line">/* Set the transform.position.x to 5 and z to 3. Keeps y.</div><div class="line"> * Equivalent to:</div><div class="line"> * var position = transform.position;</div><div class="line"> * position.x = 5;</div><div class="line"> * position.z = 3;</div><div class="line"> * transform.position = position;</div><div class="line"> */</div><div class="line">transform.SetPosition(x: 5, z: 3);</div><div class="line"></div><div class="line">// Same as above; only sets transform.localEulerAngles.y.</div><div class="line">// There are extension methods for all position/rotation/scales.</div><div class="line">transform.SetLocalEulerAngles(y: 180);</div><div class="line"></div><div class="line">// Similar methods are available for Vector2/3/4 and Color:</div><div class="line">// Gets the transform.position, but with y set to 0.</div><div class="line">Vector3 floorPosition = transform.position.Change3(y: 0);</div><div class="line"></div><div class="line">// Gets the material color, but sets the color.a value to 0.5.</div><div class="line">Color halfTransparentColor = GetComponent&lt;Renderer&gt;().sharedMaterial.color.ChangeAlpha(0.5f);</div><div class="line"></div><div class="line">// Sets the position/rotation of enemyIndicator to someEnemyTransform.position/rotation</div><div class="line">enemyIndicator.CopyPositionAndRotatationFrom(someEnemyTransform);</div></div><!-- fragment --><h3>Framerate-Independent Eased Lerping</h3>
<p>There are essentially two ways of lerping a value over time: linear (constant speed) or eased (e.g. getting slower the closer you are to the target, see <a href="http://easings.net">http://easings.net</a>.)</p>
<p>For linear lerping (and most of the easing functions), you need to track the start and end positions and the time that elapsed.</p>
<p>Calling something like <code>currentValue = Mathf.Lerp(currentValue, 1f, 0.95f);</code> every frame provides an easy way of eased lerping without tracking elapsed time or the starting value, but since it's called every frame, the actual traversed distance per second changes the higher the framerate is.</p>
<p>EasedLerpFactor replaces the lerp parameter t to make it framerate-independent and easier to estimate.</p>
<p>You can find more information about the formula used <a href="https://www.scirra.com/blog/ashley/17/using-lerp-with-delta-time">here</a>.</p>
<p>You can use <code>MathHelper.EasedLerpFactor</code> to get the t used for a lerp or call <code>MathHelper.EasedLerp</code>, <code>UnityHelper.EasedLerpVector2</code>, <code>UnityHelper.EasedLerpVector3</code>, <code>UnityHelper.EasedLerpVector4</code> or <code>UnityHelper.EasedLerpColor</code> directly.</p>
<div class="image">
<img src="https://raw.githubusercontent.com/TobiasWehrum/unity-utilities/master/_Images/EasedLerpFactorExample.gif" alt="EasedLerpFactorExample Editor Screenshot"/>
</div>
<div class="fragment"><div class="line">{C#}</div><div class="line">void Update()</div><div class="line">{</div><div class="line">    // Get the world position of the mouse pointer</div><div class="line">    Vector3 mousePositionWorld = Camera.main.ScreenToWorldPoint(Input.mousePosition);</div><div class="line">    mousePositionWorld.z = 0f;</div><div class="line"></div><div class="line">    // Set the runner position to the mouse pointer</div><div class="line">    runner.position = mousePositionWorld;</div><div class="line"></div><div class="line">    // Move the follower 75% of the remaining distance to the runner per second</div><div class="line">    follower.position = UnityHelper.EasedLerpVector3(follower.position, runner.position, 0.75f);</div><div class="line"></div><div class="line">    // ...which is the same as:</div><div class="line"></div><div class="line">    //float t = MathHelper.EasedLerpFactor(0.75f);</div><div class="line">    //follower.position = Vector3.Lerp(follower.position, mousePositionWorld, t);</div><div class="line">}</div></div><!-- fragment --><h3>Get the centroid from an array/list of Vector2/3/4</h3>
<div class="fragment"><div class="line">{C#}</div><div class="line">Vector3[] list = {</div><div class="line">                    new Vector3(-5, 10, 12),</div><div class="line">                    new Vector3(55, 32, 10),</div><div class="line">                    new Vector3(85, -40, 80)</div><div class="line">                 };</div><div class="line"></div><div class="line">// Calculates the geometric center (the average) of the input list.</div><div class="line">Debug.Log(&quot;Centroid: &quot; + list.CalculateCentroid()); // =&gt; Centroid: (45.0, 0.7, 34.0)</div></div><!-- fragment --><h3>Vector2 Rotation</h3>
<div class="fragment"><div class="line">{C#}</div><div class="line">// Create a length 1 Vector2 pointing 40 degrees away from (1.0, 0.0)</div><div class="line">var vector = UnityHelper.CreateVector2AngleDeg(20f);</div><div class="line">Debug.Log(vector); // =&gt; (0.9, 0.3)</div><div class="line"></div><div class="line">// Rotate the vector 70 degrees</div><div class="line">vector = vector.RotateDeg(70f);</div><div class="line">Debug.Log(vector); // =&gt; (0.0, 1.0)</div><div class="line"></div><div class="line">// Output the current vector rotation</div><div class="line">Debug.Log(vector.GetAngleDeg()); // =&gt; 90</div></div><!-- fragment --><h3>GameObject</h3>
<div class="fragment"><div class="line">{C#}</div><div class="line">// Assigns layer 4 to this GameObject and all its children recursively</div><div class="line">gameObject.AssignLayerToHierarchy(4);</div><div class="line"></div><div class="line">// Create an instance of a prefab. When the prefab is named &quot;Original&quot;, the instance will</div><div class="line">// be named &quot;Original(Copy)&quot;</div><div class="line">GameObject copiedGameObject = Instantiate(prefab);</div><div class="line"></div><div class="line">// Return the name without &quot;(Copy)&quot;</div><div class="line">Debug.Log(copiedGameObject.GetNameWithoutClone()); // =&gt; Original</div><div class="line"></div><div class="line">// Change the name back to &quot;Original&quot;</div><div class="line">copiedGameObject.StripCloneFromName();</div></div><!-- fragment --><h3>Rect</h3>
<div class="fragment"><div class="line">{C#}</div><div class="line">// Make a rect from (10|20) to (60|120)</div><div class="line">Rect rect = new Rect(10, 20, 50, 100);</div><div class="line"></div><div class="line">// Gets a random position for an enemy in the rect, leaving a 5 unit border</div><div class="line">Vector2 enemySpawnPosition = rect.RandomPosition(-5);</div><div class="line"></div><div class="line">// Gets a random sub rect of size 10|10 in which we could spawn multiple enemies</div><div class="line">Rect enemySpawnSubrect = rect.RandomSubRect(10, 10);</div><div class="line"></div><div class="line">Vector2 enemyPosition = new Vector2(0, 500);</div><div class="line"></div><div class="line">// Clamp an enemy position to the rect</div><div class="line">enemyPosition = rect.Clamp2(enemyPosition);</div><div class="line">Debug.Log(enemyPosition); // Output: (10.0, 120.0)</div><div class="line"></div><div class="line">// Create a rect that is 10 units bigger to each side</div><div class="line">Rect biggerRect = rect.Extend(10);</div><div class="line"></div><div class="line">// Get the corner points</div><div class="line">Vector2[] cornerPoints = rect.GetCornerPoints();</div></div><!-- fragment --><h3>Random</h3>
<div class="fragment"><div class="line">{C#}</div><div class="line">// Points in a random 2D direction</div><div class="line">var randomDirection2D = UnityHelper.RandomOnUnitCircle;</div><div class="line"></div><div class="line">// Either goes left or right</div><div class="line">var deltaX = 20 * UnityHelper.RandomSign;</div><div class="line"></div><div class="line">// Gets set to either choice</div><div class="line">var choice = UnityHelper.RandomBool ? &quot;Choice A&quot; : &quot;Choice B&quot;;</div></div><!-- fragment --><h3>PlayerPrefs: Bool</h3>
<div class="fragment"><div class="line">{C#}</div><div class="line">// Gets a PlayerPrefs key &quot;FirstStart&quot; or return true if not set</div><div class="line">bool isFirstStart = UnityHelper.PlayerPrefsGetBool(&quot;FirstStart&quot;, true);</div><div class="line"></div><div class="line">// Set the key FirstStart to false</div><div class="line">UnityHelper.PlayerPrefsSetBool(&quot;FirstStart&quot;, false);</div></div><!-- fragment --><h3>Check if a layer is included in a LayerMask</h3>
<div class="fragment"><div class="line">{C#}</div><div class="line">// Does the layer mask contain layer 4?</div><div class="line">bool containsLayer4 = someLayerMask.ContainsLayer(4);</div></div><!-- fragment --><h3>Find out how big the level bounds are</h3>
<div class="fragment"><div class="line">{C#}</div><div class="line">// Get the bounds of all colliders in the level to clamp the camera later on</div><div class="line">Collider[] allColliders = FindObjectsOfType&lt;Collider&gt;();</div><div class="line">Bounds levelBounds = UnityHelper.CombineColliderBounds(allColliders);</div></div><!-- fragment --><h3>Calculate Camera viewport world size at distance</h3>
<div class="fragment"><div class="line">{C#}</div><div class="line">// Find out how much the perspective camera can see at 10 unit away</div><div class="line">Vector2 viewportSizeAtDistance = Camera.main.CalculateViewportWorldSizeAtDistance(10);</div></div><!-- fragment --><h3>CharacterController: CapsuleCast</h3>
<div class="fragment"><div class="line">{C#}</div><div class="line">Vector3 point1;</div><div class="line">Vector3 point2;</div><div class="line">float radius;</div><div class="line">Vector3 origin = playerCharacterController.transform.position;</div><div class="line"></div><div class="line">// Get the data for the capsule cast from the current player position</div><div class="line">UnityHelper.GetCapsuleCastData(playerCharacterController, origin, out point1, out point2, out radius);</div><div class="line"></div><div class="line">// Cast 2 units forwards</div><div class="line">bool hitSomething = Physics.CapsuleCast(point1, point2, radius, Vector3.forward, 2f);</div></div><!-- fragment --><h2>Dependencies</h2>
<ul>
<li><a href="https://github.com/TobiasWehrum/unity-utilities/tree/master/MathHelper">MathHelper</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.12 </li>
  </ul>
</div>
</body>
</html>
